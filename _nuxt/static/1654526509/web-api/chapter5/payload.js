__NUXT_JSONP__("/web-api/chapter5", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae){return {data:[{document:{slug:"chapter5",description:v,title:v,position:205,category:"Web API的設計與開發",menuTitle:"Chapter 05",contributors:["cshs108"],toc:[{id:w,depth:o,text:x},{id:y,depth:l,text:z},{id:A,depth:l,text:B},{id:C,depth:l,text:D},{id:E,depth:o,text:F},{id:G,depth:l,text:H},{id:I,depth:l,text:J},{id:K,depth:l,text:L},{id:M,depth:l,text:N},{id:O,depth:l,text:P},{id:Q,depth:o,text:R},{id:S,depth:o,text:T},{id:U,depth:l,text:V},{id:W,depth:l,text:X},{id:Y,depth:o,text:Z},{id:_,depth:o,text:$}],body:{type:"root",children:[{type:b,tag:p,props:{id:w},children:[{type:b,tag:f,props:{href:"#51-%E6%96%B9%E4%BE%BF%E6%9B%B4%E6%94%B9%E8%A8%AD%E8%A8%88%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:x}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"API必須保持公開提供串接的狀態，但是我們會需要添加新功能、廢棄某些功能"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"如果只是修改API內部邏輯，對外的數據格式不變，則不需要更新API設計規範"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:y},children:[{type:b,tag:f,props:{href:"#511-%E5%85%AC%E9%96%8B%E7%99%BC%E4%BD%88%E7%9A%84api",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"LSUD(Large set of unknown developers)\n"},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"ex.FB這類的公開API"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"影響不特定開發者，範圍未知"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"API改版的影響程度大"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"無法保證用戶端可以搭配API改版而重新串接，此時強制變更API會導致終端用戶、串接應用，覺得這個服務不可靠"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:A},children:[{type:b,tag:f,props:{href:"#512-%E9%9D%A2%E5%90%91%E7%A7%BB%E5%8B%95%E6%87%89%E7%94%A8%E7%9A%84api",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:B}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"SSKD(Small set of known develop)\n"},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"只有影響特定開發者，範圍可控"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"API的改版影響程度小"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"注意不更新應用程式的刁民"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:C},children:[{type:b,tag:f,props:{href:"#513-web%E6%9C%8D%E5%8B%99%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%9A%84api",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:D}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"注意快取的影響"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{id:E},children:[{type:b,tag:f,props:{href:"#52-%E9%80%8F%E9%81%8E%E7%89%88%E6%9C%AC%E8%A8%8A%E6%81%AF%E4%BE%86%E7%AE%A1%E7%90%86api",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:F}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"更新API有會不等程度的影響，透過某些機制讓不更新用戶可以繼續使用舊的服務，更新後的用戶使用新的服務"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:u,props:{alt:"截圖 2022-01-12 下午11.43.43.png",src:"https:\u002F\u002Fspiny-backbone-80c.notion.site\u002Fimage\u002Fhttps%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F29bf5df3-10d1-4a7b-bc29-a5d707f00340%2F%E6%88%AA%E5%9C%96_2022-01-12_%E4%B8%8B%E5%8D%8811.43.43.png?table=block&id=0e1b970a-4780-46ec-98d9-fb6c780f5c3c&spaceId=5d2d13ed-dba9-47b9-be73-4ea525461379&width=2000&userId=&cache=v2"},children:[]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"實現的方式"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"不同的URI\n"},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"舊的："},{type:b,tag:f,props:{href:aa,rel:[q,r,s],target:t},children:[{type:a,value:aa}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"新的："},{type:b,tag:f,props:{href:ab,rel:[q,r,s],target:t},children:[{type:a,value:ab}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"議題：new的命名不好，如果之後又要改版，newnewapi?"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:G},children:[{type:b,tag:f,props:{href:"#521-%E5%9C%A8uri%E4%B8%AD%E5%B5%8C%E5%85%A5%E7%89%88%E6%9C%AC%E7%B7%A8%E8%99%9F",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:H}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:f,props:{href:ac,rel:[q,r,s],target:t},children:[{type:a,value:ac}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"最常見的方式，舊版本的api短時間能可繼續使用"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:u,props:{alt:"截圖 2022-01-12 下午11.50.22.png",src:"https:\u002F\u002Fspiny-backbone-80c.notion.site\u002Fimage\u002Fhttps%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3225328c-044c-4b7e-9235-90d4cb26339f%2F%E6%88%AA%E5%9C%96_2022-01-12_%E4%B8%8B%E5%8D%8811.50.22.png?table=block&id=682fa534-6843-4827-afbb-4b85f5857ee3&spaceId=5d2d13ed-dba9-47b9-be73-4ea525461379&width=2000&userId=&cache=v2"},children:[]}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:I},children:[{type:b,tag:f,props:{href:"#522-%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E7%89%88%E6%9C%AC%E7%B7%A8%E8%99%9F",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:J}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"編號規則：主版本編號、次版本編號、補丁版本編號。ex.1.0.1"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"如果只是修正BUG，則增加補丁版本編號ex.1.0.2"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"如果功能新、刪，且向下兼容，則增加次版本編號ex.1.1.1"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"如果本次修改無法向下兼容，則增加主版本編號ex.2.0.1"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"以"},{type:b,tag:f,props:{href:"http:\u002F\u002Fapi.example.com\u002Fv1\u002Fuser\u002F123%E4%BE%86%E8%AA%AA%EF%BC%8C%E5%8F%AA%E4%BD%BF%E7%94%A8%E4%B8%80%E5%80%8B%E7%89%88%E6%9C%AC%E7%B7%A8%E8%99%9F%EF%BC%8C%E4%BB%A3%E8%A1%A8%E7%82%BA%E4%B8%BB%E7%89%88%E6%9C%AC%E7%B7%A8%E8%99%9F%EF%BC%8C%E5%9B%A0%E6%AD%A4%E7%95%B6%E4%B8%BB%E7%89%88%E6%9C%AC%E7%B7%A8%E8%99%9F%E5%A2%9E%E5%8A%A0%E6%99%82%EF%BC%8CAPI%E6%89%8D%E9%80%B2%E8%A1%8C%E7%89%88%E6%9C%AC%E5%8D%87%E7%B4%9A",rel:[q,r,s],target:t},children:[{type:a,value:"http:\u002F\u002Fapi.example.com\u002Fv1\u002Fuser\u002F123來說，只使用一個版本編號，代表為主版本編號，因此當主版本編號增加時，API才進行版本升級"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"同時維護多版本的API成本相當高，也容易讓用戶混淆該用哪一個，因此小更動會盡量不去升級api版本，而是盡可能地向下相容"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"只有發生可以放棄下向相容的重大更新時才去升級api版本，因此大部分的api的網址版本編號只有主版本編號ex.\u002Fv1"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:K},children:[{type:b,tag:f,props:{href:"#523-%E5%9C%A8%E6%9F%A5%E8%A9%A2%E5%AD%97%E4%B8%B2%E5%8A%A0%E5%85%A5%E7%89%88%E6%9C%AC%E8%A8%8A%E6%81%AF",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:L}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:f,props:{href:ad,rel:[q,r,s],target:t},children:[{type:a,value:ad}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"差異：使用參數的方式代表是可以省略，如果沒有填，伺服器會直接使用默認的版本(通常是最新版本)"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"該選擇加在網址路徑還是參數？\n"},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"建議加在網址路徑，因為參數的方式如果省略的話，用戶其實不知道呼叫到的是哪個版本"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:M},children:[{type:b,tag:f,props:{href:"#524-%E9%80%8F%E9%81%8E%E5%AA%92%E9%AB%94%E9%A1%9E%E5%9E%8B%E4%BE%86%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E8%A8%8A%E6%81%AF",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:N}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"在header加入Accept:application\u002Fapi.example.v2+json"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"好處：URL可以作為純粹的資源使用"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:O},children:[{type:b,tag:f,props:{href:"#525-%E8%A9%B2%E6%8E%A1%E7%94%A8%E4%BB%80%E9%BA%BC%E6%96%B9%E6%B3%95",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:P}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"最常用的是在URL的路徑中嵌入版本訊息"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{id:Q},children:[{type:b,tag:f,props:{href:"#53-%E7%89%88%E6%9C%AC%E8%AE%8A%E6%9B%B4%E7%9A%84%E6%96%B9%E9%87%9D",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:R}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"盡可能向下相容"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"ex.原本使用gender(Int)1=男生2=女生，如果想要改為gender(String)男生、女生的方式紀錄，則建議多一個參數genderStr(String)，並把gender標示為廢棄"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"什麼時候該升級版本\n"},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"權限、驗證機制調整，ex.v1沒有身份驗證機制，v2有身份驗證機制，則可以廢棄v1升級到v2"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"因為這類的調整會動到的地方太多，難達成向下相容，因此該升級版本"}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{id:S},children:[{type:b,tag:f,props:{href:"#54-%E7%B5%82%E6%AD%A2%E6%8F%90%E4%BE%9Bapi",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:T}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"公告讓用戶知道該升級，舊API什麼時候結束服務，用戶可以規劃系統升級的時程"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Blackout Test：暫時一段時間不提供服務，逼迫用戶提早升級"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:U},children:[{type:b,tag:f,props:{href:"#542-%E6%AD%A3%E5%BC%8F%E5%81%9C%E6%AD%A2%E8%88%8Aapi",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:V}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"回傳http status 410，同時給予錯誤訊息"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"應用服務必須針對410的錯誤提示用戶該升級系統"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:m,props:{id:W},children:[{type:b,tag:f,props:{href:"#543-%E5%9C%A8%E4%BD%BF%E7%94%A8%E6%A2%9D%E6%AC%BE%E4%B8%AD%E5%AF%AB%E6%98%8E%E6%94%AF%E6%8F%B4%E6%9C%9F%E9%99%90",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:X}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"在X個月後，不再支援舊版api，但不是直接關閉服務"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"新的API出來的時候，同時宣布至少支援X月"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:p,props:{id:Y},children:[{type:b,tag:f,props:{href:"#55-%E7%B7%A8%E6%8E%92%E5%B1%A4%E4%B8%AD%E9%96%93%E5%B1%A4",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:Z}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"ex.fb graph api，源頭端的API可以負責叫小範圍，就像是單一個積木，減少開發的複雜性"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"終端透過中間層去組裝多個積木來達成頁面的需求"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"終端可以受到API改版的影響較小，源頭端可以減少API變更的阻礙"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:u,props:{alt:"截圖 2022-01-13 上午12.30.21.png",src:"https:\u002F\u002Fspiny-backbone-80c.notion.site\u002Fimage\u002Fhttps%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F6006189a-1eb8-427c-95bf-9ecc11863135%2F%E6%88%AA%E5%9C%96_2022-01-13_%E4%B8%8A%E5%8D%8812.30.21.png?table=block&id=ea41ce46-1dba-4281-9890-96fb05b6c6e1&spaceId=5d2d13ed-dba9-47b9-be73-4ea525461379&width=2000&userId=&cache=v2"},children:[]}]},{type:a,value:c},{type:b,tag:p,props:{id:_},children:[{type:b,tag:f,props:{href:"#56%E5%B0%8F%E7%B5%90",ariaHidden:g,tabIndex:h},children:[{type:b,tag:i,props:{className:[j,k]},children:[]}]},{type:a,value:$}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"最大限度減少API版本更新的頻率，注意向下兼容"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"在URI中嵌入API版本的主版本編號"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"停止提供API服務時不能立即中止，至少需要繼續公開六個月"}]},{type:a,value:c}]}]},dir:"\u002Fzh\u002Fweb-api",path:"\u002Fzh\u002Fweb-api\u002Fchapter5",extension:".md",createdAt:ae,updatedAt:ae,readingStats:{text:"7 min read",minutes:6.06,time:363600,words:1212},to:"\u002Fweb-api\u002Fchapter5"},prev:{title:"第2章 EndPoint設計與請求形式",path:"\u002Fzh\u002Fweb-api\u002Fchapter2",to:"\u002Fweb-api\u002Fchapter2"},next:{title:"第6章開發牢固的WebAPI",path:"\u002Fzh\u002Fweb-api\u002Fchapter6",to:"\u002Fweb-api\u002Fchapter6"}}],fetch:{},mutations:[]}}("text","element","\n","li","ul","a","true",-1,"span","icon","icon-link",3,"h3","p",2,"h2","nofollow","noopener","noreferrer","_blank","img","第5章 開發方便更改設計的API","51-方便更改設計的重要性","5.1 方便更改設計的重要性","511-公開發佈的api","5.1.1 公開發佈的API","512-面向移動應用的api","5.1.2 面向移動應用的API","513-web服務中使用的api","5.1.3 Web服務中使用的API","52-透過版本訊息來管理api","5.2 透過版本訊息來管理API","521-在uri中嵌入版本編號","5.2.1 在URI中嵌入版本編號","522-如何添加版本編號","5.2.2 如何添加版本編號","523-在查詢字串加入版本訊息","5.2.3 在查詢字串加入版本訊息","524-透過媒體類型來指定版本訊息","5.2.4 透過媒體類型來指定版本訊息","525-該採用什麼方法","5.2.5 該採用什麼方法","53-版本變更的方針","5.3 版本變更的方針","54-終止提供api","5.4 終止提供API","542-正式停止舊api","5.4.2 正式停止舊API","543-在使用條款中寫明支援期限","5.4.3 在使用條款中寫明支援期限","55-編排層中間層","5.5 編排層(中間層)","56小結","5.6小結","http:\u002F\u002Fapi.example.com\u002Fuser\u002F123","http:\u002F\u002Fnewapi.example.com\u002Fuser\u002F123","http:\u002F\u002Fapi.example.com\u002Fv2\u002Fuser\u002F123","http:\u002F\u002Fapi.example.com\u002Fuser\u002F123?v=1.5","2022-06-06T14:40:49.620Z")));